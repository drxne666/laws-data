name: Discord Notification

on:
  push:
    paths:
      - 'rules.json'  # –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
      - 'db.json'     # –î–æ–±–∞–≤–∏–ª –∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª, —á—Ç–æ–±—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ –ø—Ä–∏ –ª—é–±–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –±–∞–∑—ã
  workflow_dispatch:  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É Actions

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Webhook
        run: |
          # –§–æ—Ä–º–∏—Ä—É–µ–º JSON –¥–ª—è Discord –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø–æ–ª–µ–π
          curl -H "Content-Type: application/json" \
               -X POST \
               -d '{
                 "username": "Helper Updates",
                 "avatar_url": "https://github.com/github.png",
                 "embeds": [{
                   "title": "üìú –ë–∞–∑–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!",
                   "description": "–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Las Vegas | Helper.",
                   "color": 14680411,
                   "footer": {
                     "text": "Las Vegas Helper ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
                   },
                   "timestamp": "'$(date -u +%Y-%m-%dT%H:%M:%SZ)'"
                 }]
               }' \
               ${{ secrets.DISCORD_WEBHOOK }}
