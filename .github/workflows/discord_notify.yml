name: Discord Notification

on:
  push:
    paths:
      - 'rules.json'  # –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
  workflow_dispatch:  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É Actions

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Webhook
        run: |
          # –§–æ—Ä–º–∏—Ä—É–µ–º JSON –¥–ª—è Discord
          curl -H "Content-Type: application/json" \
               -X POST \
               -d '{
                 "username": "Helper Updates",
                 "avatar_url": "https://github.com/github.png",
                 "embeds": [{
                   "title": "üìú –ë–∞–∑–∞ –ø—Ä–∞–≤–∏–ª —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!",
                   "description": "–ü–∞—Ä—Å–µ—Ä –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Las Vegas | Helper.",
                   "color": 14680411,
                   "fields": [
                     {
                       "name": "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π",
                       "value": "[drxne666/laws-data](https://github.com/drxne666/laws-data)",
                       "inline": true
                     },
                     {
                       "name": "–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?",
                       "value": "[–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∞–≤–∫–∏](https://github.com/drxne666/laws-data/commits/main/rules.json)",
                       "inline": true
                     }
                   ],
                   "footer": {
                     "text": "Las Vegas Helper ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
                   },
                   "timestamp": "'$(date -u +%Y-%m-%dT%H:%M:%SZ)'"
                 }]
               }' \
               ${{ secrets.DISCORD_WEBHOOK }}
